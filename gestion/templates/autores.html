{% extends "index.html" %}

{% block contenido %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">
            <span style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                         -webkit-background-clip: text;
                         -webkit-text-fill-color: transparent;
                         background-clip: text;
                         font-weight: bold;">
                ‚úçÔ∏è Autores
            </span>
        </h2>
        {% if user.is_authenticated %}
        <a href="{% url 'crear_autor' %}" class="btn btn-primary" 
           style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                  border: none;
                  padding: 0.75rem 1.5rem;
                  border-radius: 25px;
                  font-weight: 500;
                  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
            ‚ûï Nuevo Autor
        </a>
        {% endif %}
    </div>

    {% if autores %}
    <div class="row g-4">
        {% for autor in autores %}
        <div class="col-md-6 col-lg-4">
            <div class="card h-100 autor-card" 
                 style="border-radius: 15px;
                        border: none;
                        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
                        transition: all 0.3s ease;
                        overflow: hidden;">
                
                <!-- Header con gradiente -->
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                            padding: 1.5rem;
                            color: white;">
                    <h5 class="card-title mb-1" style="font-weight: 600;">
                        {{ autor.nombre }} {{ autor.apellido }}
                    </h5>
                    <p class="mb-0" style="opacity: 0.9; font-size: 0.85rem;">
                        üìö {{ autor.libros.count }} libro{{ autor.libros.count|pluralize }}
                    </p>
                </div>

                <!-- Cuerpo de la tarjeta -->
                <div class="card-body" style="padding: 1.5rem;">
                    {% if autor.bibliografia %}
                    <p class="text-muted mb-0" style="font-size: 0.95rem; line-height: 1.6;">
                        {{ autor.bibliografia }}
                    </p>
                    {% else %}
                    <p class="text-muted fst-italic mb-0">
                        Sin biograf√≠a disponible
                    </p>
                    {% endif %}
                </div>

                <!-- Footer con acciones (SOLO para usuarios autenticados) -->
                {% if user.is_authenticated %}
                <div class="card-footer" style="background: #f8f9fa; border-top: 1px solid #e9ecef; padding: 1rem;">
                    <a href="{% url 'editar_autor' autor.id %}" 
                       class="btn btn-sm btn-outline-primary w-100" 
                       style="border-radius: 8px;">
                        ‚úèÔ∏è Editar Autor
                    </a>
                </div>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-5">
        <div style="font-size: 4rem; opacity: 0.3;">‚úçÔ∏è</div>
        <h4 class="mt-3" style="color: #666;">No hay autores registrados</h4>
        <p style="color: #999;">Comienza agregando el primer autor a la biblioteca</p>
        {% if user.is_authenticated %}
        <a href="{% url 'crear_autor' %}" class="btn btn-primary mt-3"
           style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                  border: none;
                  padding: 0.75rem 2rem;
                  border-radius: 25px;">
            ‚ûï Agregar Primer Autor
        </a>
        {% endif %}
    </div>
    {% endif %}
</div>

<style>
    .autor-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15) !important;
    }

    .btn-outline-primary:hover {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-color: transparent;
        color: white;
    }
</style>
{% endblock %}