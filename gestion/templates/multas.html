{% extends "index.html" %}

{% block contenido %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="mb-0">ğŸ’° Lista de Multas</h2>
    </div>

    {% if multas %}
    <div class="multas-lista">
        {% for multa in multas %}
        <div class="multa-card {% if multa.pagada %}multa-pagada{% else %}multa-pendiente{% endif %}"
             style="background: white; 
                    border: 1px solid #e1e8ed; 
                    border-radius: 12px; 
                    padding: 1.5rem; 
                    margin-bottom: 1rem;
                    transition: all 0.3s;">
            
            <div class="d-flex justify-content-between align-items-start mb-3">
                <div class="multa-header">
                    <h5 class="mb-1" style="color: #667eea; font-weight: 600;">{{ multa.codigo }}</h5>
                    <span class="badge 
                        {% if multa.tipo == 'r' %}bg-warning text-dark
                        {% elif multa.tipo == 'p' %}bg-danger
                        {% else %}bg-info{% endif %}"
                        style="padding: 0.5rem 0.75rem;">
                        {% if multa.tipo == 'r' %}ğŸ• Retraso
                        {% elif multa.tipo == 'p' %}âŒ PÃ©rdida
                        {% elif multa.tipo == 'd' %}âš ï¸ Deterioro
                        {% endif %}
                    </span>
                </div>
                <div class="text-end">
                    <h4 class="mb-1" style="color: #667eea; font-weight: 600;">${{ multa.monto }}</h4>
                    {% if multa.pagada %}
                        <span class="badge bg-success">âœ“ Pagada</span>
                    {% else %}
                        <span class="badge bg-danger">Pendiente</span>
                    {% endif %}
                </div>
            </div>
            
            <div class="multa-body">
                <p class="mb-2">
                    <strong>ğŸ“‹ PrÃ©stamo:</strong> 
                    <a href="{% url 'detalle_prestamo' multa.prestamo.id %}" 
                       style="color: #667eea; text-decoration: none;">
                        {{ multa.prestamo.codigo }}
                    </a>
                </p>
                <p class="mb-2">
                    <strong>ğŸ“š Libro:</strong> {{ multa.prestamo.libro.titulo }}
                </p>
                <p class="mb-2">
                    <strong>ğŸ‘¤ Usuario:</strong> 
                    {% if multa.prestamo.usuario_biblioteca %}
                        {{ multa.prestamo.usuario_biblioteca.nombre }}
                    {% else %}
                        <span class="text-danger">Sin usuario asignado</span>
                    {% endif %}
                </p>
                <p class="mb-0">
                    <strong>ğŸ“… Fecha:</strong> {{ multa.fecha|date:"d/m/Y" }}
                </p>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="text-center py-5">
        <div style="font-size: 4rem; opacity: 0.3;">ğŸ’°</div>
        <h4 class="mt-3" style="color: #666;">No hay multas registradas</h4>
        <p style="color: #999;">Las multas aparecerÃ¡n aquÃ­ cuando se devuelvan libros con retraso o daÃ±os</p>
    </div>
    {% endif %}
</div>

<style>
    .multa-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
    }
    
    .multa-pagada {
        border-left: 4px solid #28a745 !important;
        opacity: 0.85;
    }
    
    .multa-pendiente {
        border-left: 4px solid #dc3545 !important;
    }
    
    .multa-card a:hover {
        text-decoration: underline !important;
    }
    
    @media (max-width: 768px) {
        .multa-card .d-flex {
            flex-direction: column;
            gap: 1rem;
        }
        
        .text-end {
            text-align: left !important;
        }
    }
</style>
{% endblock %}
